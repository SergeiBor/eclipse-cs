<project name="CheckstylePluginDocs" default="build.dist" basedir="../">

	<!-- get the environment properties specific to each developer machine -->
	<property file="${basedir}/build/env.properties" />

	<property name="dist.docs" value="${basedir}/docs" />
	<property name="dist.web" value="${basedir}/web" />

	<!-- ==================================================== -->
	<!--   CLEAN TARGET                                       -->
	<!-- ==================================================== -->
	<target name="clean" description="Cleans any directories and generated files">
		<delete dir="${dist.docs}" includes="**" excludes=".cvsignore" failonerror="false" quiet="true" />
		<delete dir="${dist.web}" includes="**" excludes=".cvsignore" failonerror="false" quiet="true" />
	</target>

	<!-- ==================================================== -->
	<!--   DISTRIBUTION TARGET                                -->
	<!-- ==================================================== -->
	<target name="build.dist" depends="clean,build.plugin.docs,build.plugin.website" />

	<!-- ==================================================== -->
	<!--   BUILD THE PLUGIN ONLINE DOCUMENTATION              -->
	<!-- ==================================================== -->
	<target name="build.plugin.docs">
		<copy todir="${dist.docs}">
			<fileset dir="${basedir}/base" includes="*.css" />
			<fileset dir="${basedir}/base" includes="*.js" />
			<fileset dir="${basedir}/base" includes="yui/**" />
			<fileset dir="${basedir}/base" includes="fancyzoom/**" />
			<fileset dir="${basedir}/base" includes="images/**" />
			<fileset dir="${basedir}/base" includes="dtds/**" />
			<fileset dir="${basedir}/base" includes="psf/**" />
			<fileset dir="${basedir}/base" includes="releasenotes/**/*.jpg" />
			<fileset dir="${basedir}/base" includes="releasenotes/**/*.png" />
		</copy>

		<xslt style="${basedir}/build/generate_docs.xsl" basedir="${basedir}/base" includes="**/*.*html" destdir="${dist.docs}" />
	</target>

	<!-- ==================================================== -->
	<!--   BUILD THE PLUGIN WEBSITE                           -->
	<!-- ==================================================== -->
	<target name="build.plugin.website">
		<copy todir="${dist.web}">
			<fileset dir="${basedir}/base" includes="*.css" />
			<fileset dir="${basedir}/base" includes="*.js" />
			<fileset dir="${basedir}/base" includes="yui/**" />
			<fileset dir="${basedir}/base" includes="fancyzoom/**" />
			<fileset dir="${basedir}/base" includes="images/**" />
			<fileset dir="${basedir}/base" includes="update/**" />
			<fileset dir="${basedir}/base" includes="dtds/**" />
			<fileset dir="${basedir}/base" includes="psf/**" />
			<fileset dir="${basedir}/base" includes="releasenotes/**/*.jpg" />
			<fileset dir="${basedir}/base" includes="releasenotes/**/*.png" />
		</copy>
		<copy todir="${dist.web}/dtds" flatten="true">
			<fileset dir="${basedir}/../net.sf.eclipsecs.core/src" includes="**/*.dtd" />
		</copy>

		<xslt style="${basedir}/build/generate_docs.xsl" basedir="${basedir}/base" includes="**/*.html" destdir="${dist.web}">
			<param name="style" expression="website" />
		</xslt>
		<xslt style="${basedir}/build/generate_docs.xsl" basedir="${basedir}/base" includes="*.shtml" destdir="${dist.web}">
			<param name="style" expression="website" />
			<mapper type="glob" from="*.shtml" to="*.shtml" />
		</xslt>

		<!--<replace file="${dist.web}/update/site.xml" token="${version}" value="${version.full}" />-->

	</target>
</project>